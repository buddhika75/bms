<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Personal History</title>
    </h:head>
    <h:body style="text-align: center;">
        <h:form >
            <p:panelGrid columns="1" >
                <f:facet name="header" >
                    <div>
                        <h:outputLabel value="Visit of #{patientEncounterController.current.patient.person.nameWithTitle} on " >
                        </h:outputLabel>
                        <h:outputLabel value="#{patientEncounterController.current.createdAt}" >
                            <f:convertDateTime pattern="dd MMMM yyyy" ></f:convertDateTime>
                        </h:outputLabel>
                        <h:outputLabel value= " by #{patientEncounterController.current.opdDoctor.person.nameWithTitle}" >
                        </h:outputLabel>
                        <p:spacer width="10" ></p:spacer>
                        <h:panelGrid columns="7">
                            <p:commandButton ajax="false" value="Save Visit" action="#{patientEncounterController.saveSelected()}"  onclick="onSubmitButton();" ></p:commandButton>
                            <p:commandButton ajax="false" value="Close" onclick="PF(window.close());" ></p:commandButton>
                        </h:panelGrid>
                    </div>
                </f:facet>
                <p:inputTextarea rows="70" cols="90" 
                                 value="#{patientEncounterController.current.patient.comments}"
                                 rendered="#{sessionController.hasPrivilege('ClinicalPatientCommentsView') or true}"
                                 disabled="#{!sessionController.hasPrivilege('ClinicalPatientCommentsEdit') and false}">
                    <p:ajax process="@this" ></p:ajax>
                </p:inputTextarea>
            </p:panelGrid>

        </h:form>



    </h:body>
</html>

